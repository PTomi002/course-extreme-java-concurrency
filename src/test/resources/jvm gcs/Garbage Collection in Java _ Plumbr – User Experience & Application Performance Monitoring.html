<!DOCTYPE html>
<!-- saved from url=(0053)https://plumbr.io/handbook/garbage-collection-in-java -->
<html lang="en"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

		<link rel="shortcut icon" href="https://plumbr.io/app/themes/plumbr/dist/images/favicon_9b72e733.png">

	<title>Garbage Collection in Java | Plumbr – User Experience &amp; Application Performance Monitoring</title>

<!-- The SEO Framework by Sybre Waaijer -->
<meta name="description" content="The introduction to Mark and Sweep Garbage Collection is a mostly theoretical one. When things come to practice, numerous adjustments need to be done to…">
<meta property="og:image" content="https://plumbr.io/app/uploads/2015/10/plumbr-980.png">
<meta property="og:image:width" content="980">
<meta property="og:image:height" content="370">
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Garbage Collection in Java | Plumbr – User Experience &amp; Application Performance Monitoring">
<meta property="og:description" content="The introduction to Mark and Sweep Garbage Collection is a mostly theoretical one. When things come to practice, numerous adjustments need to be done to accommodate for real-world scenarios and needs.">
<meta property="og:url" content="https://plumbr.io/handbook/garbage-collection-in-java">
<meta property="og:site_name" content="Plumbr – User Experience &amp; Application Performance Monitoring">
<meta property="article:publisher" content="https://www.facebook.com/javaplumbr">
<meta property="article:published_time" content="2015-05-14T18:36+00:00">
<meta property="article:modified_time" content="2018-12-12T13:16-01:00">
<meta property="og:updated_time" content="2018-12-12T13:16-01:00">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@JavaPlumbr">
<meta name="twitter:title" content="Garbage Collection in Java | Plumbr – User Experience &amp; Application Performance Monitoring">
<meta name="twitter:description" content="The introduction to Mark and Sweep Garbage Collection is a mostly theoretical one. When things come to practice, numerous adjustments need to be done to accommodate for real-world scenarios and needs.">
<meta name="twitter:image" content="https://plumbr.io/app/uploads/2015/10/plumbr-980.png">
<meta name="twitter:image:width" content="980">
<meta name="twitter:image:height" content="370">
<link rel="canonical" href="https://plumbr.io/handbook/garbage-collection-in-java">
<script src="./Garbage Collection in Java _ Plumbr – User Experience &amp; Application Performance Monitoring_files/collectedforms.js.download" type="text/javascript" id="CollectedForms-5894543" crossorigin="anonymous" data-leadin-portal-id="5894543" data-leadin-env="prod" data-loader="hs-scriptloader" data-hsjs-portal="5894543" data-hsjs-env="prod" data-hsjs-hublet="na1"></script><script src="./Garbage Collection in Java _ Plumbr – User Experience &amp; Application Performance Monitoring_files/5894543.js.download" type="text/javascript" id="hs-analytics"></script><script src="./Garbage Collection in Java _ Plumbr – User Experience &amp; Application Performance Monitoring_files/5894543.js(1).download" type="text/javascript" id="cookieBanner-5894543" data-cookieconsent="ignore" data-loader="hs-scriptloader" data-hsjs-portal="5894543" data-hsjs-env="prod" data-hsjs-hublet="na1"></script><script async="" src="./Garbage Collection in Java _ Plumbr – User Experience &amp; Application Performance Monitoring_files/analytics.js.download"></script><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://plumbr.io/","name":"Plumbr &#8211; User Experience &amp; Application Performance Monitoring"}},{"@type":"ListItem","position":2,"item":{"@id":"https://plumbr.io/handbook/java-garbage-collection-handbook","name":"Java Garbage Collection handbook"}},{"@type":"ListItem","position":3,"item":{"@id":"https://plumbr.io/handbook/garbage-collection-in-java","name":"Garbage Collection in Java"}}]}</script>
<!-- / The SEO Framework by Sybre Waaijer | 3.26ms meta | 0.61ms boot -->

<link rel="dns-prefetch" href="https://js.hs-scripts.com/">
<link rel="dns-prefetch" href="https://use.typekit.net/">
<link rel="stylesheet" id="wp-block-library-css" href="./Garbage Collection in Java _ Plumbr – User Experience &amp; Application Performance Monitoring_files/style.min.css" type="text/css" media="all">
<link rel="stylesheet" id="plumbr/main.css-css" href="./Garbage Collection in Java _ Plumbr – User Experience &amp; Application Performance Monitoring_files/main_113b80ea.css" type="text/css" media="all">
<link rel="stylesheet" id="plumbr/typekit.css-css" href="./Garbage Collection in Java _ Plumbr – User Experience &amp; Application Performance Monitoring_files/thh1ylu.css" type="text/css" media="all">

<link rel="https://api.w.org/" href="https://plumbr.io/wp-json/">
<link rel="alternate" type="application/json+oembed" href="https://plumbr.io/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fplumbr.io%2Fhandbook%2Fgarbage-collection-in-java">
<link rel="alternate" type="text/xml+oembed" href="https://plumbr.io/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fplumbr.io%2Fhandbook%2Fgarbage-collection-in-java&amp;format=xml">
			<!-- DO NOT COPY THIS SNIPPET! Start of Page Analytics Tracking for HubSpot WordPress plugin v7.48.24-->
			<script type="text/javascript">
				var _hsq = _hsq || [];
				_hsq.push(["setContentType", "blog-post"]);
			</script>
			<!-- DO NOT COPY THIS SNIPPET! End of Page Analytics Tracking for HubSpot WordPress plugin -->
						<script>
				(function() {
					var hbspt = window.hbspt = window.hbspt || {};
					hbspt.forms = hbspt.forms || {};
					hbspt._wpFormsQueue = [];
					hbspt.enqueueForm = function(formDef) {
						if (hbspt.forms && hbspt.forms.create) {
							hbspt.forms.create(formDef);
						} else {
							hbspt._wpFormsQueue.push(formDef);
						}
					}
					if (!window.hbspt.forms.create) {
						Object.defineProperty(window.hbspt.forms, 'create', {
							configurable: true,
							get: function() {
								return hbspt._wpCreateForm;
							},
							set: function(value) {
								hbspt._wpCreateForm = value;
								while (hbspt._wpFormsQueue.length) {
									var formDef = hbspt._wpFormsQueue.shift();
									if (!document.currentScript) {
										var formScriptId = 'leadin-forms-v2-js';
										hubspot.utils.currentScript = document.getElementById(formScriptId);
									}
									hbspt._wpCreateForm.call(hbspt.forms, formDef);
								}
							},
						});
					}
				})();
			</script>
		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
			<link rel="stylesheet" href="./Garbage Collection in Java _ Plumbr – User Experience &amp; Application Performance Monitoring_files/prettify.css">
	
	    <script>
        (function () {
            var RDECODE = /(%[0-9A-Z]{2})+/g;

            function plumbrGetCookie(e) {
                var o = document.cookie ? document.cookie.split("; ") : [];
                for (var c = 0; c < o.length; c++) {
                    var n = o[c].indexOf("=");
                    if (e === o[c].slice(0, n).replace(RDECODE, decodeURIComponent)) {
                        return o[c].slice(n + 1).replace(RDECODE, decodeURIComponent)
                    }
                }
            }
            try {
                var plumbrConsentCookie = plumbrGetCookie('plumbrCookieConsent')
                if (plumbrConsentCookie) {
                    window.plumbrConsent = JSON.parse(plumbrConsentCookie);
                }
            } catch (e) {
                console.error('Cookie error')
            }
        })()
    </script>
	<script src="./Garbage Collection in Java _ Plumbr – User Experience &amp; Application Performance Monitoring_files/pa-early.js.download" crossorigin="anonymous" data-plumbr-lateinit=""></script>
	<script>
		var paConf = {
            "accountId": "k8g0ta8m6e7gsb2afhq6qm5efh",
            "serverUrl": "https://plumbr.plumbr.io",
            "appName": "plumbr.io"
		}

		if (!window.plumbrConsent || !window.plumbrConsent.analytics) {
            paConf["tracking"] = {
                "user": false,
                "session": false
            };
        }

        PLUMBR.init(paConf);
	</script>

    
    <script>
		if (!window.plumbrConsentCookie || !window.plumbrConsentCookie.analytics) {
            window['ga-disable-UA-25569981-1'] = true;
		}

        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-25569981-1', 'auto');
        ga('require', 'displayfeatures');
        ga('require', 'eventTracker');
        ga('require', 'outboundLinkTracker');
        ga('send', 'pageview');
    </script>

	<script type="application/ld+json">
	{
		"@context" : "http://schema.org",
		"@type"    : "Organization",
		"name"     : "Plumbr &#8211; User Experience &amp; Application Performance Monitoring",
		"url" 	   : "https://plumbr.io",
		"sameAs"   : [
			"https://www.facebook.com/javaplumbr",
            "https://twitter.com/JavaPlumbr",
            "https://www.linkedin.com/company/plumbr"
		]
	}
</script></head>

<body class=" ">
<div class="top-banner">
	Splunk Completes Acquisition of Plumbr <a href="https://www.splunk.com/en_us/blog/conf-splunklive/splunk-extends-best-in-class-observability-suite.html">Learn more <i class="icon icon-right-open"></i></a>
</div>
<div id="header" class="clear">
	<div class="wrap clear">
		<p id="logo"><a href="https://plumbr.io/" class="icon icon-plumbr"></a></p>

		<div id="user-box">
			<a href="https://plumbr.io/handbook/garbage-collection-in-java#" data-modal="modal-login" class="js-show-logged-out">Log In</a>
			<a href="https://plumbr.io/handbook/garbage-collection-in-java#" class="btn cta" id="menu-toggler"><i class="icon icon-menu"></i></a>

			<a id="continueMonitoring" href="https://app.plumbr.io/" class="btn cta btn-icon hidden js-show-logged-in"><i class="icon icon-chart-area hidden"></i> Continue Monitoring</a>
		</div>

					<ul id="nav" class="menu"><li class="parent"><a href="https://plumbr.io/product">Product</a><div class="submenu" style="display: none;"><ul><li><a href="https://plumbr.io/product/features">Features</a></li><li><a href="https://plumbr.io/product/apm">APM</a></li><li><a href="https://plumbr.io/product/rum">RUM</a></li><li><a href="https://plumbr.io/integrations">Integrations</a></li></ul></div></li><li class="parent"><a href="https://plumbr.io/solutions">Solutions</a><div class="submenu" style="display: none;"><ul><li><a href="https://plumbr.io/solutions/devops">Devops</a></li><li><a href="https://plumbr.io/solutions/oncall-engineers">On-call Engineers</a></li></ul></div></li><li><a href="https://plumbr.io/pricing">Pricing</a></li><li class="parent"><a href="https://plumbr.io/handbook/garbage-collection-in-java#">Resources</a><div class="submenu" style="display: none;"><ul><li><a href="https://plumbr.io/how-plumbr-works">How Plumbr Works</a></li><li><a href="https://plumbr.io/blog">Blog</a></li><li><a href="https://plumbr.io/case-study/port-of-tallinn">Case studies</a></li><li><a href="https://plumbr.io/support">Support</a></li><li><a href="https://plumbr.io/root-causes">Root Causes</a></li></ul></div></li></ul>			</div>
</div>



<div id="user-nav">
    <div class="wrap clear">
        <ul>
                <li class="">
        <a href="https://plumbr.io/outofmemoryerror">
            <i class="icon icon-book"></i>
			java.lang.Outofmemoryerror        </a>
    </li>
    <li class="active">
        <a href="https://plumbr.io/java-garbage-collection-handbook">
            <i class="icon icon-book"></i>
			Java Garbage Collection handbook        </a>
    </li>
	        </ul>
    </div>
</div>
<div id="content">
    <div class="wrap split">

        <p id="sidebar-toggler">
            <a href="https://plumbr.io/handbook/garbage-collection-in-java#" data-label="Close categories">
                <i class="icon icon-menu"></i>
                <i class="icon icon-cancel"></i>
                <span class="label">Handbook menu</span>
            </a>
        </p>

        <div id="sidebar">

			    <div class="floating-wrap" style="padding-top: 0px;">
        <div class="floating-content" style="position: static; top: auto; left: 0px; bottom: auto; width: 226px; margin-bottom: 0px;">
			
							
                <div class="box menu ">
                    <h2>
                        <a href="https://plumbr.io/handbook/what-is-garbage-collection">
							What Is Garbage Collection?                        </a>
						                            <a href="https://plumbr.io/handbook/what-is-garbage-collection" class="expander"><i class="icon icon-down-open"></i><i class="icon icon-up-open"></i></a>
						                    </h2>
								        <ul class=" support-menu">
			                <li>
                    <a href="https://plumbr.io/handbook/what-is-garbage-collection#manual-memory-management">
						Manual Memory Management                    </a>
								        <ul class="">
			                <li>
                    <a href="https://plumbr.io/handbook/what-is-garbage-collection#on-demand">
						Smart Pointers                    </a>
							                </li>
			        </ul>
		                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/what-is-garbage-collection#automated-memory-management">
						Automated Memory Management                    </a>
								        <ul class="">
			                <li>
                    <a href="https://plumbr.io/handbook/what-is-garbage-collection#reference-counting">
						Reference Counting                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/what-is-garbage-collection#mark-and-sweep">
						Mark and Sweep                    </a>
							                </li>
			        </ul>
		                </li>
			        </ul>
		                </div>
							
                <div class="box menu active open">
                    <h2>
                        <a href="https://plumbr.io/handbook/garbage-collection-in-java">
							Garbage Collection in Java                        </a>
						                            <a href="https://plumbr.io/handbook/garbage-collection-in-java" class="expander"><i class="icon icon-down-open"></i><i class="icon icon-up-open"></i></a>
						                    </h2>
								        <ul class=" support-menu">
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-in-java#fragmenting-and-compacting">
						Fragmenting and Compacting                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-in-java#generational-hypothesis">
						Generational Hypothesis                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-in-java#memory-pools">
						Memory Pools                    </a>
								        <ul class="">
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-in-java#eden">
						Eden                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-in-java#survivor-spaces">
						Survivor Spaces                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-in-java#oldtenured-space">
						Old Generation                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-in-java#permgen">
						PermGen                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-in-java#metaspace">
						Metaspace                    </a>
							                </li>
			        </ul>
		                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-in-java#minor-gc-major-gc-full-gc">
						Minor GC vs Major GC vs Full GC                    </a>
								        <ul class="">
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-in-java#minor-gc">
						Minor GC                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-in-java#major-gc-vs-full-gc">
						Major GC vs Full GC                    </a>
							                </li>
			        </ul>
		                </li>
			        </ul>
		                </div>
							
                <div class="box menu ">
                    <h2>
                        <a href="https://plumbr.io/handbook/garbage-collection-algorithms">
							GC Algorithms: Basics                        </a>
						                            <a href="https://plumbr.io/handbook/garbage-collection-algorithms" class="expander"><i class="icon icon-down-open"></i><i class="icon icon-up-open"></i></a>
						                    </h2>
								        <ul class=" support-menu">
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-algorithms#marking-reachable-objects">
						Marking Reachable Objects                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-algorithms#removing-unused-objects">
						Removing Unused Objects                    </a>
								        <ul class="">
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-algorithms#sweep">
						Sweep                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-algorithms#compact">
						Compact                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-algorithms#copy">
						Copy                    </a>
							                </li>
			        </ul>
		                </li>
			        </ul>
		                </div>
							
                <div class="box menu ">
                    <h2>
                        <a href="https://plumbr.io/handbook/garbage-collection-algorithms-implementations">
							GC Algorithms: Implementations                        </a>
						                            <a href="https://plumbr.io/handbook/garbage-collection-algorithms-implementations" class="expander"><i class="icon icon-down-open"></i><i class="icon icon-up-open"></i></a>
						                    </h2>
								        <ul class=" support-menu">
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-algorithms-implementations#serial-gc">
						Serial GC                    </a>
								        <ul class="">
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-algorithms-implementations#serial-minor-gc">
						Minor GC                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-algorithms-implementations#serial-full-gc">
						Full GC                    </a>
							                </li>
			        </ul>
		                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-algorithms-implementations#parallel-gc">
						Parallel GC                    </a>
								        <ul class="">
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-algorithms-implementations#parallel-minor-gc">
						Minor GC                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-algorithms-implementations#parallel-full-gc">
						Full GC                    </a>
							                </li>
			        </ul>
		                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-algorithms-implementations#concurrent-mark-and-sweep">
						Concurrent Mark and Sweep                    </a>
								        <ul class="">
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-algorithms-implementations#cms-minor-gc">
						Minor GC                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-algorithms-implementations#cms-full-gc">
						Full GC                    </a>
							                </li>
			        </ul>
		                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-algorithms-implementations#g1">
						G1 – Garbage First                    </a>
								        <ul class="">
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-algorithms-implementations#evacuation-pause-fully-young">
						Evacuation Pause: Fully Young                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-algorithms-implementations#concurrent-marking">
						Concurrent Marking                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-algorithms-implementations#evacuation-pause-mixed">
						Evacuation Pause: Mixed                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-algorithms-implementations#summary">
						Summary                    </a>
							                </li>
			        </ul>
		                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/garbage-collection-algorithms-implementations#shenandoah">
						Shenandoah                    </a>
							                </li>
			        </ul>
		                </div>
							
                <div class="box menu ">
                    <h2>
                        <a href="https://plumbr.io/handbook/gc-tuning">
							GC Tuning: Basics                        </a>
						                            <a href="https://plumbr.io/handbook/gc-tuning" class="expander"><i class="icon icon-down-open"></i><i class="icon icon-up-open"></i></a>
						                    </h2>
								        <ul class=" support-menu">
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning#throughput-vs-latency-vs-capacity">
						Core Concepts                    </a>
								        <ul class="">
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning#latency">
						Latency                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning#throughput">
						Throughput                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning#capacity">
						Capacity                    </a>
							                </li>
			        </ul>
		                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning#example">
						Example                    </a>
								        <ul class="">
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning#tuning-for-latency">
						Tuning for Latency                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning#tuning-for-throughput">
						Tuning for Throughput                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning#tuning-for-capacity">
						Tuning for Capacity                    </a>
							                </li>
			        </ul>
		                </li>
			        </ul>
		                </div>
							
                <div class="box menu ">
                    <h2>
                        <a href="https://plumbr.io/handbook/gc-tuning-measuring">
							GC Tuning: Tooling                        </a>
						                            <a href="https://plumbr.io/handbook/gc-tuning-measuring" class="expander"><i class="icon icon-down-open"></i><i class="icon icon-up-open"></i></a>
						                    </h2>
								        <ul class=" support-menu">
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-measuring#jmx-api">
						JMX API                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-measuring#jvisualvm">
						JVisualVM                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-measuring#jstat">
						jstat                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-measuring#gc-logs">
						GC logs                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-measuring#gcviewer">
						GCViewer                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-measuring#profilers">
						Profilers                    </a>
								        <ul class="">
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-measuring#hprof">
						hprof                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-measuring#java-visualvm">
						Java VisualVM                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-measuring#aprof">
						AProf                    </a>
							                </li>
			        </ul>
		                </li>
			        </ul>
		                </div>
							
                <div class="box menu ">
                    <h2>
                        <a href="https://plumbr.io/handbook/gc-tuning-in-practice">
							GC Tuning: In Practice                        </a>
						                            <a href="https://plumbr.io/handbook/gc-tuning-in-practice" class="expander"><i class="icon icon-down-open"></i><i class="icon icon-up-open"></i></a>
						                    </h2>
								        <ul class=" support-menu">
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#high-allocation-rate">
						High Allocation Rate                    </a>
								        <ul class="">
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#how-to-measure-allocation-rate">
						How to Measure Allocation Rate?                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#why-should-i-care">
						Why Should I Care?                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#give-me-an-example">
						Give me an Example                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#could-my-jvms-be-affected">
						Could my JVMs be Affected?                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#what-is-the-solution">
						What is the Solution?                    </a>
							                </li>
			        </ul>
		                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#premature-promotion">
						Premature Promotion                    </a>
								        <ul class="">
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#how-to-measure-promotion-rate">
						How to Measure Promotion Rate                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#why-should-i-care-promotion">
						Why Should I Care?                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#give-me-an-example-promotion">
						Give me an Example                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#could-my-jvms-be-affected-promotion">
						Could my JVMs be Affected?                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#what-is-the-solution-promotion">
						What is the Solution?                    </a>
							                </li>
			        </ul>
		                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#weak-soft-and-phantom-references">
						Weak, Soft and Phantom References                    </a>
								        <ul class="">
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#why-should-i-care-references">
						Why Should I Care?                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#give-me-an-example-references">
						Give me an Example                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#could-my-jvms-be-affected-references">
						Could my JVMs be Affected?                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#what-is-the-solution-references">
						What is the Solution?                    </a>
							                </li>
			        </ul>
		                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#other-examples">
						Other Examples                    </a>
								        <ul class="">
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#rmi-gc">
						RMI &amp; GC                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#jvmti-tagging-gc">
						JVMTI tagging &amp; GC                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#humongous-allocations">
						Humongous Allocations                    </a>
							                </li>
			                <li>
                    <a href="https://plumbr.io/handbook/gc-tuning-in-practice#conclusion">
						Conclusion                    </a>
							                </li>
			        </ul>
		                </li>
			        </ul>
		                </div>
			        </div>
    </div>
	
        </div>
        <div id="main">
            <div class="article handbook">
									
<h1 class="highlight">Garbage Collection in Java</h1>
<p>The introduction to Mark and Sweep Garbage Collection is a mostly theoretical one. When things come to practice, numerous adjustments need to be done to accommodate for real-world scenarios and needs. For a simple example, let us take a look at what sorts of bookkeeping the JVM needs to do so that we can safely continue allocating objects.</p>

					<h2 id="fragmenting-and-compacting">Fragmenting and Compacting</h2><p>Whenever sweeping takes place, the JVM has to make sure the areas filled with unreachable objects can be reused. This can (and eventually will) lead to memory fragmentation which, similarly to disk fragmentation, leads to two problems:</p>
<ul>
<li>Write operations become more time-consuming as finding the next free block of sufficient size is no longer a trivial operation.</li>
<li>When creating new objects, JVM is allocating memory in contiguous blocks. So if fragmentation escalates to a point where no individual free fragment is large enough to accommodate the newly created object, an allocation error occurs.</li>
</ul>
<p>To avoid such problems, the JVM is making sure the fragmenting does not get out of hand. So instead of just marking and sweeping, a ‘memory defrag’ process also happens during garbage collection. This process relocates all the reachable objects next to each other, eliminating (or reducing) the fragmentation. Here is an illustration of that:</p>
<p><img class="aligncenter size-full wp-image-4911" src="./Garbage Collection in Java _ Plumbr – User Experience &amp; Application Performance Monitoring_files/fragmented-vs-compacted-heap.png" alt="java memory fragmentation" width="580" height="184" srcset="https://plumbr.io/app/uploads/2015/05/fragmented-vs-compacted-heap.png 580w, https://plumbr.io/app/uploads/2015/05/fragmented-vs-compacted-heap-300x95.png 300w" sizes="(max-width: 580px) 100vw, 580px"></p>
<h2 id="generational-hypothesis">Generational Hypothesis</h2><p>As we have mentioned before, doing a garbage collection entails stopping the application completely. It is also quite obvious that the more objects there are the longer it takes to collect all the garbage. But what if we would have a possibility to work with smaller memory regions? Investigating the possibilities, a group of researchers has observed that most allocations inside applications fall into two categories:</p>
<ul>
<li>Most of the objects become unused quickly</li>
<li>The ones that do not usually survive for a (very) long time</li>
</ul>
<p>These observations come together in the Weak Generational Hypothesis. Based on this hypothesis, the memory inside the VM is divided into what is called the <strong>Young Generation</strong> and the <strong>Old Generation</strong>. The latter is sometimes also called <strong>Tenured</strong>.</p>
<p><img class="aligncenter size-full wp-image-4912" src="./Garbage Collection in Java _ Plumbr – User Experience &amp; Application Performance Monitoring_files/object-age-based-on-GC-generation-generational-hypothesis.png" alt="object age in java" width="580" height="184" srcset="https://plumbr.io/app/uploads/2015/05/object-age-based-on-GC-generation-generational-hypothesis.png 580w, https://plumbr.io/app/uploads/2015/05/object-age-based-on-GC-generation-generational-hypothesis-300x95.png 300w" sizes="(max-width: 580px) 100vw, 580px"></p>
<p>Having such separate and individually cleanable areas allows for a multitude of different algorithms that have come a long way in improving the performance&nbsp;of the GC.</p>
<p>This is not to say there are no issues with such an approach. For one, objects from different generations may in fact have references to each other that also count as ‘de facto’ GC roots when collecting a generation.</p>
<p>But most importantly, the generational hypothesis may in fact not hold for some applications. Since the GC algorithms are optimized for objects which either ‘die young’ or ‘are likely to live forever’, the JVM behaves rather poorly with objects with ‘medium’ life expectancy.</p>

<h2 id="memory-pools">Memory Pools</h2><p>The following division of memory pools within the heap should be familiar. What is not so commonly understood is how Garbage Collection performs its duties within the different memory pools. Notice that in different GC algorithms some implementation details might vary but, again, the concepts in this chapter remain effectively the same.</p>
<p><img class="aligncenter size-full wp-image-4913" src="./Garbage Collection in Java _ Plumbr – User Experience &amp; Application Performance Monitoring_files/java-heap-eden-survivor-old.png" alt="memory pools inside heap consisting of eden, survivor and old spaces" width="580" height="184" srcset="https://plumbr.io/app/uploads/2015/05/java-heap-eden-survivor-old.png 580w, https://plumbr.io/app/uploads/2015/05/java-heap-eden-survivor-old-300x95.png 300w" sizes="(max-width: 580px) 100vw, 580px"></p>
<h3 id="eden">Eden</h3><p>Eden is the region in memory where the objects are typically allocated when they are created. As there are typically multiple threads creating a lot of objects simultaneously, Eden is further divided into one or more&nbsp;<strong>Thread Local Allocation Buffer</strong>&nbsp;(TLAB for short) residing in the Eden space. These buffers allow the JVM to allocate most objects&nbsp;within one thread directly in the corresponding TLAB, avoiding the expensive synchronization with other threads.</p>
<p>When allocation inside a TLAB is not possible (typically because there’s not enough room there), the allocation moves on to a shared Eden space. If there’s not enough room in there either, a garbage collection process in Young Generation is triggered to free up more space. If the garbage collection also does not result in sufficient free memory inside Eden, then the object is allocated in the Old Generation.</p>
<p>When Eden is being collected, GC walks all the reachable objects from the roots and marks them as alive.</p>
<p><span style="line-height: 1.5;">We have previously noted that objects can have cross-generational links so a straightforward approach would have to check all the references from other generations to Eden. Doing so would unfortunately defeat the whole point of having generations in the first place. The JVM has a trick up its sleeve: <em>card-marking</em>. Essentially, the JVM just marks the rough location of ‘dirty’ objects in Eden that may have links to them from the Old Generation. You can read more on that in Nitsan’s&nbsp;</span><a style="line-height: 1.5;" href="http://psy-lob-saw.blogspot.com/2014/10/the-jvm-write-barrier-card-marking.html" target="_blank">blog entry</a>.</p>
<p><img class="aligncenter size-full wp-image-4914" src="./Garbage Collection in Java _ Plumbr – User Experience &amp; Application Performance Monitoring_files/TLAB-in-Eden-memory.png" alt="TLAB used in Eden" width="580" height="184" srcset="https://plumbr.io/app/uploads/2015/05/TLAB-in-Eden-memory.png 580w, https://plumbr.io/app/uploads/2015/05/TLAB-in-Eden-memory-300x95.png 300w" sizes="(max-width: 580px) 100vw, 580px"></p>
<p>After the marking phase is completed, all the live objects in Eden are copied to one of the <em>Survivor spaces</em>. The whole Eden is now considered to be empty and can be reused to allocate more objects. Such an approach is called <strong>“Mark and Copy”</strong>: the live objects are marked, and then copied (not moved) to a survivor space.</p>
<h3 id="survivor-spaces">Survivor Spaces</h3><p>Next to the Eden space reside two <strong>Survivor</strong> spaces called <i>from</i> and <i>to</i>. It is important to notice that one of the two Survivor spaces is always empty.</p>
<p>The empty Survivor space will start having residents next time the Young generation gets collected. All of the live objects from the whole of the Young generation (that includes both the Eden space and the non-empty ‘from’ Survivor space) are copied to the ‘to’ survivor space. After this process has completed, ‘to’ now contains objects and ‘from’ does not. Their roles are switched at this time.</p>
<p><img class="aligncenter size-full wp-image-4915" src="./Garbage Collection in Java _ Plumbr – User Experience &amp; Application Performance Monitoring_files/how-java-garbage-collection-works.png" alt="Copying collector in survivor space java" width="580" height="184" srcset="https://plumbr.io/app/uploads/2015/05/how-java-garbage-collection-works.png 580w, https://plumbr.io/app/uploads/2015/05/how-java-garbage-collection-works-300x95.png 300w" sizes="(max-width: 580px) 100vw, 580px"></p>
<p>&nbsp;</p>
<p>This process of copying the live objects between the two Survivor spaces is repeated several times until some objects are considered to have matured and are ‘old enough’. Remember that, based on the generational hypothesis, objects which have survived for some time are expected to continue to be used for very long time.</p>
<p>Such ‘tenured’ objects can thus be&nbsp;<strong>promoted</strong>&nbsp;to the Old Generation. When this happens, objects are not moved from one survivor space to another but instead to the Old space, where they will reside until they become unreachable.</p>
<p>To determine whether the object is ‘old enough’ to be considered ready for propagation to Old space, GC tracks the number of collections a particular object has survived. After each generation of objects finishes with a GC, those still alive have their age incremented. Whenever the age exceeds a certain&nbsp;<strong>tenuring threshold</strong>&nbsp;the object will be promoted to Old space.</p>
<p>The actual tenuring threshold is dynamically adjusted by the JVM, but specifying&nbsp;<em>-XX:+</em><em>MaxTenuringThreshold </em>sets an upper limit on it. Setting&nbsp;<em>-XX:+MaxTenuringThreshold=0</em>&nbsp;results in immediate promotion without copying it between Survivor spaces. By default, this threshold on modern JVMs is set to 15 GC cycles. This is also the maximum value in HotSpot.</p>
<p>Promotion may also happen prematurely if the size of the Survivor space is not enough to hold all of the live objects in the Young generation.</p>
<h3 id="oldtenured-space">Old Generation</h3><p>The implementation for the Old Generation memory space is much more complex. Old Generation is usually significantly larger and is occupied by objects that are less likely to be garbage.</p>
<p>GC in the Old Generation happens less frequently than in the Young Generation. Also, since most objects are expected to be alive in the Old Generation, there is no Mark and Copy happening. Instead, the objects are moved around to minimize fragmentation. The algorithms cleaning the Old space are generally built on different foundations. In principle, the steps taken go through the following:</p>
<ul>
<li>Mark reachable objects by setting the marked bit next to all objects accessible through GC roots</li>
<li>Delete all unreachable objects</li>
<li>Compact the content of old space by copying the live objects contiguously to the beginning of the Old space</li>
</ul>
<p>As you can see from the description, GC in Old Generation has to deal with explicit compacting to avoid excessive fragmentation.</p>
<h3 id="permgen">PermGen</h3><p>Prior to Java 8 there existed a special space called the ‘Permanent Generation’. This is where the metadata such as classes would go. Also, some additional things like internalized strings were kept in Permgen. It actually used to create a lot of trouble to Java developers, since it is quite hard to predict how much space all of that would require. Result of these failed predictions took the form of <a href="https://plumbr.io/outofmemoryerror/permgen-space">java.lang.OutOfMemoryError: Permgen space</a>. Unless the cause of such OutOfMemoryError was an actual memory leak, the way to fix this problem was to simply increase the permgen size similar to the following example setting the maximum allowed permgen size to 256 MB:&nbsp;</p>
<pre>java -XX:MaxPermSize=256m com.mycompany.MyApplication</pre>
<h3 id="metaspace">Metaspace</h3><p>As predicting the need for metadata was a complex and inconvenient exercise, the Permanent Generation was removed in Java 8 in favor of the Metaspace. From this point on, most of the miscellaneous things were moved to regular Java heap.</p>
<p>The class definitions, however, are now loaded into something called Metaspace. It is located in the native memory and does not interfere with the regular heap objects. By default, Metaspace size is only limited by the amount of native memory available to the Java process. This saves developers from a situation when adding just one more class to the application results in the <a href="https://plumbr.io/outofmemoryerror/permgen-space">java.lang.OutOfMemoryError: Permgen space</a>. Notice that having such seemingly unlimited space does not ship without costs – letting the Metaspace to grow uncontrollably you can introduce heavy swapping and/or reach native allocation failures instead.</p>
<p>In case you still wish to protect yourself for such occasions you can limit the growth of Metaspace similar to following, limiting Metaspace size to 256 MB:</p>
<pre>java -XX:MaxMetaspaceSize=256m com.mycompany.MyApplication</pre>
<h2 id="minor-gc-major-gc-full-gc">Minor GC vs Major GC vs Full GC</h2><p>The Garbage Collection events cleaning out different parts inside heap memory are often called Minor, Major and Full GC events. In this section we cover the differences between these events. Along the way we can hopefully see that this distinction is actually not too relevant.</p>
<p>What typically is relevant is whether the application meets its SLAs, and to see that you monitor your application for latency or throughput. And only then are GC events linked to the results. What is important about these events is whether they stopped the application and how long it took.</p>
<p>But as the terms Minor, Major and Full GC are widely used and without a proper definition, let us look into the topic in a bit more detail.</p>
<h3 id="minor-gc">Minor GC</h3><p>Collecting garbage from the Young space is called&nbsp;<strong>Minor GC</strong>. This definition is both clear and uniformly understood. But there are still some interesting takeaways you should be aware of when dealing with Minor Garbage Collection events:</p>
<ol>
<li>Minor GC is always triggered when the JVM is unable to allocate space for a new object, e.g. Eden is getting full. So the higher the allocation rate, the more frequently Minor GC occurs.</li>
<li>During a Minor GC event, Tenured Generation is effectively ignored. References from Tenured Generation to Young Generation are considered&nbsp;to be&nbsp;GC roots. References from Young Generation to Tenured Generation are simply ignored during the mark phase.</li>
<li>Against common belief, Minor GC does trigger stop-the-world pauses, suspending the application threads. For most applications, the length of the pauses is negligible latency-wise if most of the objects in the Eden can be considered garbage and are never copied to Survivor/Old spaces. If the opposite is true and most of the newborn objects are not eligible for collection, Minor GC pauses start taking considerably more time.</li>
</ol>
<p>So defining&nbsp;Minor GC is easy –&nbsp;<strong>Minor GC cleans the Young </strong><strong>Generation</strong>.</p>
<h3 id="major-gc-vs-full-gc">Major GC vs Full GC</h3><p>It should be&nbsp;noted that there are no formal definitions for those terms – neither in the JVM specification nor in the Garbage Collection research papers. But on the first glance, building these definitions on top of what we know to be true about Minor GC cleaning Young space should be simple:</p>
<ul>
<li><strong>Major GC</strong> is cleaning the Old space.</li>
<li><strong>Full GC</strong> is cleaning the entire Heap – both Young and Old spaces.</li>
</ul>
<p>Unfortunately it is a bit more complex and confusing. To start with – many Major GCs are triggered by Minor GCs, so separating the two is impossible in many cases. On the other hand – modern garbage collection algorithms like G1 perform partial garbage cleaning so, again, using the term ‘cleaning’ is only partially correct.</p>
<p>This leads us to the point where&nbsp;<strong>instead of worrying about whether the GC is called Major or Full GC, you should focus on finding out whether the GC at hand stopped all the application threads or was </strong><strong>able to progress concurrently with the application threads</strong>.</p>
<p>This confusion is even built right into the JVM standard tools. What I mean by that is best explained via an example. Let us compare the output of two different tools tracing the GC on a JVM running with Concurrent Mark and Sweep collector (<em>-XX:+UseConcMarkSweepGC</em>)</p>
<p>First attempt is to get the insight via the&nbsp;<a href="http://docs.oracle.com/javase/8/docs/technotes/tools/unix/jstat.html"><em>jstat</em></a>&nbsp;output:</p>
<pre><code>my-precious: me$ jstat -gc -t 4235 1s</code></pre>
<pre><code>Time S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   
 5.7 34048.0 34048.0  0.0   34048.0 272640.0 194699.7 1756416.0   181419.9  18304.0 17865.1 2688.0 2497.6      3    0.275   0      0.000    0.275
 6.7 34048.0 34048.0 34048.0  0.0   272640.0 247555.4 1756416.0   263447.9  18816.0 18123.3 2688.0 2523.1      4    0.359   0      0.000    0.359
 7.7 34048.0 34048.0  0.0   34048.0 272640.0 257729.3 1756416.0   345109.8  19072.0 18396.6 2688.0 2550.3      5    0.451   0      0.000    0.451
 8.7 34048.0 34048.0 34048.0 34048.0 272640.0 272640.0 1756416.0  444982.5  19456.0 18681.3 2816.0 2575.8      7    0.550   0      0.000    0.550
 9.7 34048.0 34048.0 34046.7  0.0   272640.0 16777.0  1756416.0   587906.3  20096.0 19235.1 2944.0 2631.8      8    0.720   0      0.000    0.720
10.7 34048.0 34048.0  0.0   34046.2 272640.0 80171.6  1756416.0   664913.4  20352.0 19495.9 2944.0 2657.4      9    0.810   0      0.000    0.810
11.7 34048.0 34048.0 34048.0  0.0   272640.0 129480.8 1756416.0   745100.2  20608.0 19704.5 2944.0 2678.4     10    0.896   0      0.000    0.896
12.7 34048.0 34048.0  0.0   34046.6 272640.0 164070.7 1756416.0   822073.7  20992.0 19937.1 3072.0 2702.8     11    0.978   0      0.000    0.978
<b>13.7 34048.0 34048.0 34048.0  0.0   272640.0 211949.9 1756416.0   897364.4  21248.0 20179.6 3072.0 2728.1     12    1.087   1      0.004    1.091
14.7 34048.0 34048.0  0.0   34047.1 272640.0 245801.5 1756416.0   597362.6  21504.0 20390.6 3072.0 2750.3     13    1.183   2      0.050    1.233</b>
15.7 34048.0 34048.0  0.0   34048.0 272640.0 21474.1  1756416.0   757347.0  22012.0 20792.0 3200.0 2791.0     15    1.336   2      0.050    1.386
16.7 34048.0 34048.0 34047.0  0.0   272640.0 48378.0  1756416.0   838594.4  22268.0 21003.5 3200.0 2813.2     16    1.433   2      0.050    1.484</code></pre>
<p>This snippet is extracted from the first 17 seconds after the JVM was launched. Based on this information we could conclude that after 12 Minor GC runs two Full GC runs were performed, spanning&nbsp;<strong>50ms</strong>&nbsp;in total. You would get the same confirmation via GUI-based tools, such as the <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/management/jconsole.html">jconsole</a>&nbsp;or&nbsp;<a href="http://download.oracle.com/javase/6/docs/technotes/tools/share/jvisualvm.html">jvisualvm</a>.</p>
<p>Before nodding at this conclusion, let’s look at the output of the garbage collection logs gathered from the same JVM launch. Apparently&nbsp;<em>-XX:+PrintGCDetails</em>&nbsp;tells us a different and a more detailed story:</p>
<pre><code>java -XX:+PrintGCDetails -XX:+UseConcMarkSweepGC eu.plumbr.demo.GarbageProducer</code></pre>
<pre><code>3.157: [GC (Allocation Failure) 3.157: [ParNew: 272640K-&gt;34048K(306688K), 0.0844702 secs] 272640K-&gt;69574K(2063104K), 0.0845560 secs] [Times: user=0.23 sys=0.03, real=0.09 secs] 
4.092: [GC (Allocation Failure) 4.092: [ParNew: 306688K-&gt;34048K(306688K), 0.1013723 secs] 342214K-&gt;136584K(2063104K), 0.1014307 secs] [Times: user=0.25 sys=0.05, real=0.10 secs] 
... cut for brevity ...
11.292: [GC (Allocation Failure) 11.292: [ParNew: 306686K-&gt;34048K(306688K), 0.0857219 secs] 971599K-&gt;779148K(2063104K), 0.0857875 secs] [Times: user=0.26 sys=0.04, real=0.09 secs] 
12.140: [GC (Allocation Failure) 12.140: [ParNew: 306688K-&gt;34046K(306688K), 0.0821774 secs] 1051788K-&gt;856120K(2063104K), 0.0822400 secs] [Times: user=0.25 sys=0.03, real=0.08 secs] 
12.989: [GC (Allocation Failure) 12.989: [ParNew: 306686K-&gt;34048K(306688K), 0.1086667 secs] 1128760K-&gt;931412K(2063104K), 0.1087416 secs] [Times: user=0.24 sys=0.04, real=0.11 secs] 
13.098: [<b>GC (CMS Initial Mark)</b> [1 CMS-initial-mark: 897364K(1756416K)] 936667K(2063104K), <b>0.0041705 secs</b>] [Times: user=0.02 sys=0.00, real=0.00 secs] 
13.102: [CMS-concurrent-mark-start]
13.341: [CMS-concurrent-mark: 0.238/0.238 secs] [Times: user=0.36 sys=0.01, real=0.24 secs] 
13.341: [CMS-concurrent-preclean-start]
13.350: [CMS-concurrent-preclean: 0.009/0.009 secs] [Times: user=0.03 sys=0.00, real=0.01 secs] 
13.350: [CMS-concurrent-abortable-preclean-start]
13.878: [GC (Allocation Failure) 13.878: [ParNew: 306688K-&gt;34047K(306688K), 0.0960456 secs] 1204052K-&gt;1010638K(2063104K), 0.0961542 secs] [Times: user=0.29 sys=0.04, real=0.09 secs] 
14.366: [CMS-concurrent-abortable-preclean: 0.917/1.016 secs] [Times: user=2.22 sys=0.07, real=1.01 secs] 
14.366: [<b>GC (CMS Final Remark)</b> [YG occupancy: 182593 K (306688 K)]14.366: [Rescan (parallel) , 0.0291598 secs]14.395: [weak refs processing, 0.0000232 secs]14.395: [class unloading, 0.0117661 secs]14.407: [scrub symbol table, 0.0015323 secs]14.409: [scrub string table, 0.0003221 secs][1 CMS-remark: 976591K(1756416K)] 1159184K(2063104K), <b>0.0462010 secs</b>] [Times: user=0.14 sys=0.00, real=0.05 secs] 
14.412: [CMS-concurrent-sweep-start]
14.633: [CMS-concurrent-sweep: 0.221/0.221 secs] [Times: user=0.37 sys=0.00, real=0.22 secs] 
14.633: [CMS-concurrent-reset-start]
14.636: [CMS-concurrent-reset: 0.002/0.002 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]</code></pre>
<p>Based on this information we can see that after 12 Minor GC runs ‘something different’ indeed started happening. But instead of two Full GC runs, this ‘different thing’ was in reality just a single GC running in Old generation and consisting of different phases:</p>
<ul>
<li>Initial Mark phase, spanning for 0.0041705 seconds or approximately 4ms. This phase is a stop-the-world event stopping all application threads for initial marking.</li>
<li>Markup and Preclean phases.&nbsp;were executed&nbsp;concurrently with the application threads.</li>
<li>Final Remark phase, spanning for 0.0462010 seconds or approximately 46ms. This phase is again stop-the-world event.</li>
<li>Sweep operation was executed concurrently, without stopping the application threads.</li>
</ul>
<p>So what we see from the actual garbage collection logs is that, instead of two Full GC operations, just one Major GC cleaning Old space was actually executed.</p>
<p>If you were after latency then the data revealed by&nbsp;<em>jstat</em>&nbsp;would have led you towards correct decisions. It correctly listed the two stop-the-world events totaling 50ms affecting the latency for all the active threads at that very moment. But if you were trying to optimize for throughput, you would have been misguided – listing just the stop-the-world initial mark and final remark phases, the <em>jstat</em> output completely hides the concurrent work being done.</p>

				            </div>
        </div>
    </div>
</div>

	<div id="footer">
		<div class="wrap">
			<div id="menu-footer" class="row clear fat-footer"><div class="col-2"><ul><li class="title"><strong>Products &amp; Services</strong></li><li><a href="https://plumbr.io/application-monitoring">Application Monitoring</a></li><li><a href="https://plumbr.io/product/rum">Real-User Monitoring</a></li></ul></div><div class="col-2"><ul><li class="title"><strong>Company</strong></li><li><a href="https://plumbr.io/about-us">About us</a></li><li><a href="https://plumbr.io/join-us">Join us</a></li></ul></div><div class="col-2"><ul><li class="title"><strong>Support</strong></li><li><a href="https://plumbr.io/support/manual">Manual</a></li><li><a href="https://plumbr.io/support/what-is-plumbr-2">FAQ</a></li></ul></div><div class="col-2"><ul><li class="title"><strong>Resources</strong></li><li><a href="https://plumbr.io/blog">Blog</a></li><li><a href="https://plumbr.io/java-garbage-collection-handbook">Garbage Collection Handbook</a></li><li><a href="https://plumbr.io/outofmemoryerror">Memory Leak Handbook</a></li></ul></div><div class="col-2"><ul><li class="title"><strong>Pricing</strong></li><li><a href="https://plumbr.io/pricing">Pricing</a></li></ul></div><div class="col-2"><ul><li class="title"><strong>Integrations</strong></li><li><a href="https://plumbr.io/support/manual#browser-agent-api">Browser Agent API</a></li><li><a href="https://plumbr.io/support/manual#agent-api">Java Agent API</a></li><li><a href="https://app.plumbr.io/docs">Server API</a></li><li><a href="https://plumbr.io/integrations/nagios">Nagios</a></li><li><a href="https://plumbr.io/integrations/prometheus">Prometheus</a></li><li><a href="https://plumbr.io/integrations/zabbix">Zabbix</a></li></ul></div></div><div class="textwidget custom-html-widget"><ul class="social">
	<li><a href="mailto:support@plumbr.io"><i class="icon icon-mail-alt"></i></a></li>
	<li><a target="_blank" href="https://twitter.com/JavaPlumbr" rel="noopener noreferrer"><i class="icon icon-twitter-squared"></i></a></li>
	<li><a target="_blank" href="https://www.linkedin.com/company/plumbr" rel="noopener noreferrer"><i class="icon icon-linkedin-squared"></i></a></li>
	<li>
<a style="display: flex;" href="https://www.capterra.com/reviews/151215/Plumbr?utm_source=vendor&amp;utm_medium=badge&amp;utm_campaign=capterra_reviews_badge">  <img alt="capterra" style="height: 23px;
width: 45px;" border="0" src="./Garbage Collection in Java _ Plumbr – User Experience &amp; Application Performance Monitoring_files/67206f388f45e0bc89ee313994c73a7d.png"></a>
</li>
</ul>
<p id="copyright">© Copyright Plumbr. All Rights Reserved. </p></div>		</div>
	</div>
	
<div id="modal-wrap">
	
	        <div class="modal full alt" id="intro-sample-1">
            <a href="https://plumbr.io/handbook/garbage-collection-in-java#" class="close"><i class="icon icon-cancel"></i></a>
            <img src="./Garbage Collection in Java _ Plumbr – User Experience &amp; Application Performance Monitoring_files/intro-sample-1.png" alt="">
        </div>

        <div class="modal full alt" id="intro-sample-2">
            <a href="https://plumbr.io/handbook/garbage-collection-in-java#" class="close"><i class="icon icon-cancel"></i></a>
            <img src="./Garbage Collection in Java _ Plumbr – User Experience &amp; Application Performance Monitoring_files/intro-sample-2.png" alt="">
        </div>
	
	
	
	
	
	
	
	
	

	
	
	
	
	
	
	
	
	

	
	<div class="modal login" id="modal-login">
	<a href="https://plumbr.io/handbook/garbage-collection-in-java#" id="modal-login-close" class="close"><i class="icon icon-cancel"></i></a>
	<h2>Log In</h2>
	<form id="modal-login-form">
		<dl class="form">
			<dt><label for="login-mail">Your e-mail</label></dt>
			<dd>
				<input name="userName" type="email" id="login-mail" class="txt" maxlength="255" autofocus="autofocus" tabindex="1">
			</dd>
			<dt><label for="login-password">Password</label></dt>
			<dd>
				<input name="password" type="password" id="login-password" class="txt" maxlength="255" tabindex="2">
				<a href="https://plumbr.io/handbook/garbage-collection-in-java#" id="forgot-password" data-modal="modal-new-password" tabindex="5">Forgot your password?</a>
			</dd>
			<dd><input name="isFromComment" type="hidden" id="login-comment" class="txt" value="false"></dd>
		</dl>
		<p class="form-action"><input id="modal-login-submit" type="submit" class="btn big" value="LOG IN" tabindex="3"></p>
	</form>
</div>
	<div class="modal login" id="modal-new-password">
	<a href="https://plumbr.io/handbook/garbage-collection-in-java#" class="close"><i class="icon icon-cancel"></i></a>
	<h2>Reset password</h2>
	<p>You will receive a link to create a new password via email.</p>

	<div class="msg-icon hidden" id="reset-success">
		<i class="icon icon-ok"></i>

		<div class="aligner">
			<p>Instructions on how to change your password have been sent to your e-mail.</p>
		</div>
	</div>

	<form>
		<dl class="form">
			<dt><label for="new-mail">Email</label></dt>
			<dd><input name="email" type="email" id="new-mail" class="txt"></dd>
		</dl>
		<p class="form-action"><input type="submit" class="btn big" value="Get new password"></p>
	</form>
</div>
	<div class="modal signup" id="modal-register">
	<a href="https://plumbr.io/handbook/garbage-collection-in-java#" class="close"><i class="icon icon-cancel"></i></a>
	<div class="register">
		<h2>Notification</h2>
		<p class="info">Plumbr has been acquired by Splunk and no longer offers trial access to its product.
		Read more <a href="https://www.splunk.com/en_us/blog/conf-splunklive/splunk-extends-best-in-class-observability-suite.html">here</a></p>
	</div>
</div>

	<div class="modal video" id="modal-video">
		<a id="close-video" href="https://plumbr.io/handbook/garbage-collection-in-java#" class="close"><i class="icon icon-cancel"></i></a>
		<div class="flex-video">
			<div id="video01"></div>
		</div>
	</div>

	
	
	





</div>
	
<div id="cookie-consent" class="cookies" style="display: none;">
    <div id="overview">
        <p>This site uses cookies in order to provide a better user experience to you.</p>

        <div class="buttons">
            <button id="acceptAll" class="cbtn wide">Accept all cookies</button>
            <button id="cookieSettings" class="cbtn wide deny">Cookie settings</button>
        </div>
    </div>

    <div id="settings" class="hidden">
        <div>
            <label class="cookie-label disabled">
                Required cookies
                <input checked="true" type="checkbox" disabled="">
                <span class="checkmark"></span>
            </label>

            <p class="desc">These cookies are required to enable core site functionality.</p>
        </div>

        <div class="cookie-type">
            <label class="cookie-label">
                Statistics &amp; analytics cookies
                <input id="analytics-checkbox" type="checkbox">
                <span class="checkmark"></span>
            </label>

            <p class="desc">These cookies give us information about how you use our website and allow us to improve
                the user experience.</p>
        </div>

        <p>To learn more about our cookie usage click <a href="https://plumbr.io/support/plumbr-cookies" target="_blank">here</a>.</p>

        <div style="margin-top: 10px;">
            <button id="cookieCancel" class="cbtn">Cancel</button>
            <button id="cookieSave" class="cbtn">Save</button>
        </div>
    </div>
</div>
	
<script type="text/javascript">
/* <![CDATA[ */
var leadin_wordpress = {"userRole":"visitor","pageType":"post","leadinPluginVersion":"7.48.24"};
/* ]]> */
</script>
<script async="" defer="" id="hs-script-loader" type="text/javascript" src="./Garbage Collection in Java _ Plumbr – User Experience &amp; Application Performance Monitoring_files/5894543.js(2).download"></script>
<script type="text/javascript">
/* <![CDATA[ */
var param = {"portalUrl":"https:\/\/app.plumbr.io"};
/* ]]> */
</script>



<script type="text/javascript">
/* <![CDATA[ */
var local = {"isSupportIndex":"","isSupportType":"","isEmailLandingPage":"","isSearch":"","ajaxurl":"https:\/\/plumbr.io\/wp\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>





<script type="text/javascript" defer="" src="./Garbage Collection in Java _ Plumbr – User Experience &amp; Application Performance Monitoring_files/autoptimize_80f1fdb2d70c854f88929cb5e1e65e79.js.download"></script>

<iframe owner="archetype" title="archetype" style="display: none; visibility: hidden;" src="./Garbage Collection in Java _ Plumbr – User Experience &amp; Application Performance Monitoring_files/saved_resource.html"></iframe></body></html>